<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MTG Commander Bracket Analyzer</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Open+Sans:wght@400;600&display=swap');
        
        :root {
            --bg-dark: #0d1117;
            --bg-card: #161b22;
            --border: #30363d;
            --text: #e6edf3;
            --text-muted: #8b949e;
            --accent-blue: #58a6ff;
            --accent-purple: #a371f7;
            --accent-gold: #d4a017;
            --warning-yellow: #d29922;
            --bracket-1: #3fb950;
            --bracket-2: #58a6ff;
            --bracket-3: #a371f7;
            --bracket-4: #f97316;
            --bracket-5: #f85149;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Open Sans', sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
        
        header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(88, 166, 255, 0.1) 0%, rgba(163, 113, 247, 0.1) 100%);
            border-radius: 16px;
            border: 1px solid var(--border);
        }
        
        h1 {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--accent-gold) 0%, var(--accent-purple) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }
        
        .subtitle { color: var(--text-muted); font-size: 1.1rem; }
        
        .input-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--accent-blue);
        }
        
        textarea {
            width: 100%;
            height: 300px;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            color: var(--text);
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            resize: vertical;
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.2);
        }
        
        .button-row { display: flex; gap: 1rem; margin-top: 1rem; flex-wrap: wrap; }
        
        button {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-purple) 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(88, 166, 255, 0.3);
        }
        
        .btn-secondary {
            background: var(--bg-dark);
            color: var(--text);
            border: 1px solid var(--border);
        }
        
        .btn-secondary:hover { border-color: var(--accent-blue); }
        
        .results { display: grid; gap: 1.5rem; }
        
        .result-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
        }
        
        .result-card h2 {
            font-family: 'Cinzel', serif;
            font-size: 1.3rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .bracket-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'Cinzel', serif;
        }
        
        .bracket-1 { background: var(--bracket-1); color: black; }
        .bracket-2 { background: var(--bracket-2); color: black; }
        .bracket-3 { background: var(--bracket-3); color: black; }
        .bracket-4 { background: var(--bracket-4); color: black; }
        .bracket-5 { background: var(--bracket-5); color: white; }
        
        .bracket-name { font-size: 0.9rem; color: var(--text-muted); margin-left: 0.5rem; }
        
        .game-changer-list { display: flex; flex-wrap: wrap; gap: 0.5rem; }
        
        .game-changer-tag {
            background: rgba(163, 113, 247, 0.2);
            border: 1px solid var(--accent-purple);
            border-radius: 20px;
            padding: 0.25rem 0.75rem;
            font-size: 0.85rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
        }
        
        .stat {
            background: var(--bg-dark);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-blue); }
        .stat-label { font-size: 0.8rem; color: var(--text-muted); }
        
        .reasoning-list { list-style: none; }
        .reasoning-list li { padding: 0.5rem 0; padding-left: 1.5rem; position: relative; }
        .reasoning-list li::before { content: '‚Üí'; position: absolute; left: 0; color: var(--accent-gold); }
        
        .loading { text-align: center; padding: 2rem; }
        
        .spinner {
            width: 40px; height: 40px;
            border: 3px solid var(--border);
            border-top-color: var(--accent-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin { to { transform: rotate(360deg); } }
        
        .warning-card {
            background: rgba(210, 153, 34, 0.1);
            border: 1px solid var(--warning-yellow);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .warning-card:last-child { margin-bottom: 0; }
        
        .warning-card h3 {
            color: var(--warning-yellow);
            font-size: 1rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .warning-list { list-style: none; margin-top: 0.5rem; }
        .warning-list li { padding: 0.25rem 0; color: var(--text-muted); }
        
        .commander-display {
            background: linear-gradient(135deg, rgba(212, 160, 23, 0.15) 0%, rgba(163, 113, 247, 0.15) 100%);
            border: 1px solid var(--accent-gold);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .commander-icon { font-size: 1.5rem; }
        .commander-name { font-family: 'Cinzel', serif; font-size: 1.2rem; color: var(--accent-gold); }
        .commander-label { font-size: 0.8rem; color: var(--text-muted); }
        
        .info-banner {
            background: rgba(88, 166, 255, 0.1);
            border: 1px solid var(--accent-blue);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        // ============================================================
        // CARD LISTS & CONSTANTS
        // ============================================================
        
        // Official Game Changers list as of October 2025 (51 cards)
        const GAME_CHANGERS = new Set([
            "drannith magistrate", "enlightened tutor", "humility", "smothering tithe", 
            "teferi's protection", "consecrated sphinx", "cyclonic rift", "fierce guardianship",
            "force of will", "gifts ungiven", "intuition", "mystical tutor", 
            "narset, parter of veils", "rhystic study", "thassa's oracle", "ad nauseam",
            "bolas's citadel", "braids, cabal minion", "demonic tutor", "imperial seal",
            "necropotence", "opposition agent", "orcish bowmasters", 
            "tergrid, god of fright // tergrid's lantern", "vampiric tutor",
            "gamble", "jeska's will", "underworld breach", "panoptic mirror",
            "crop rotation", "natural order", "seedborn muse", "survival of the fittest", 
            "worldly tutor", "grand arbiter augustin iv", "notion thief", "aura shards", 
            "coalition victory", "chrome mox", "grim monolith", "lion's eye diamond", 
            "mana vault", "mox diamond", "the one ring", "ancient tomb", "field of the dead", 
            "gaea's cradle", "glacial chasm", "mishra's workshop", "serra's sanctum", 
            "the tabernacle at pendrell vale"
        ]);
        
        const MASS_LAND_DENIAL = new Set([
            "armageddon", "catastrophe", "decree of annihilation", "devastation", "epicenter",
            "fall of the thran", "global ruin", "impending disaster", "jokulhaups",
            "keldon firebombers", "obliterate", "ravages of war", "ruination", "sunder",
            "thoughts of ruin", "worldslayer", "blood moon", "back to basics"
        ]);
        
        const EXTRA_TURN_CARDS = new Set([
            "time walk", "time warp", "temporal manipulation", "temporal mastery", "expropriate",
            "time stretch", "beacon of tomorrows", "capture of jingzhou", "karn's temporal sundering",
            "nexus of fate", "part the waterveil", "savor the moment", "temporal trespass",
            "walk the aeons", "alrund's epiphany", "medomai the ageless", "notorious throng"
        ]);
        
        // Basic lands - can have any number
        const BASIC_LANDS = new Set([
            "plains", "island", "swamp", "mountain", "forest", "wastes",
            "snow-covered plains", "snow-covered island", "snow-covered swamp", 
            "snow-covered mountain", "snow-covered forest"
        ]);
        
        // Cards that explicitly allow any number in deck
        const UNLIMITED_CARDS = new Set([
            "relentless rats", "rat colony", "shadowborn apostle", 
            "persistent petitioners", "dragon's approach", "slime against humanity",
            "nazg√ªl", "seven dwarves" // Seven Dwarves allows up to 7
        ]);
        
        const BRACKET_NAMES = { 1: "Exhibition", 2: "Core", 3: "Upgraded", 4: "Optimized", 5: "cEDH" };

        // ============================================================
        // PARSING FUNCTIONS
        // ============================================================
        
        function parseDecklist(text) {
            const lines = text.split('\n');
            const cards = [];
            let commander = null;
            let inCommanderSection = false;
            
            for (let line of lines) {
                line = line.trim();
                if (!line) continue;
                
                const lineLower = line.toLowerCase();
                
                // Detect commander section headers
                if ((lineLower.includes('commander') || lineLower.includes('general')) && 
                    (line.startsWith('//') || line.startsWith('#') || line.endsWith(':') || 
                     lineLower === 'commander' || lineLower === 'general')) {
                    inCommanderSection = true;
                    continue;
                }
                
                // Detect other section headers (ends commander section)
                if ((line.startsWith('//') || line.startsWith('#')) && 
                    !lineLower.includes('commander') && !lineLower.includes('general')) {
                    inCommanderSection = false;
                    continue;
                }
                
                // Skip section labels
                if (lineLower === 'deck' || lineLower === 'deck:' || 
                    lineLower === 'mainboard' || lineLower === 'mainboard:' ||
                    lineLower.startsWith('sideboard')) {
                    inCommanderSection = false;
                    continue;
                }
                
                // Skip pure comment lines
                if (line.startsWith('//') || line.startsWith('#')) continue;
                
                // Parse the card: "1 Sol Ring", "1x Sol Ring", "Sol Ring"
                const match = line.match(/^(\d+)x?\s+(.+)$/i);
                let quantity, name;
                
                if (match) {
                    quantity = parseInt(match[1]);
                    name = match[2].trim();
                } else {
                    quantity = 1;
                    name = line;
                }
                
                // Clean up name - remove set codes like "(NEO)" or "[NEO]"
                name = name.replace(/\s*[\(\[][A-Z0-9]+[\)\]]\s*$/i, '').trim();
                
                // If in commander section, mark as commander
                const isCommanderEntry = inCommanderSection;
                if (isCommanderEntry && !commander) {
                    commander = name;
                }
                
                cards.push({ quantity, name, isCommander: isCommanderEntry });
            }
            
            return { cards, commander };
        }
        
        // ============================================================
        // ANALYSIS FUNCTIONS
        // ============================================================
        
        function analyzeCards(cards, commander) {
            const warnings = [];
            const gameChangersFound = [];
            const massLdFound = [];
            const extraTurnsFound = [];
            
            // Track card occurrences for duplicate detection
            const cardOccurrences = new Map();
            
            // First pass: collect all card occurrences
            for (const card of cards) {
                const nameLower = card.name.toLowerCase();
                
                if (!cardOccurrences.has(nameLower)) {
                    cardOccurrences.set(nameLower, {
                        properName: card.name,
                        totalQuantity: 0,
                        entries: []
                    });
                }
                
                const occurrence = cardOccurrences.get(nameLower);
                occurrence.totalQuantity += card.quantity;
                occurrence.entries.push(card);
            }
            
            // Calculate total cards (handling commander duplication)
            let totalCards = 0;
            const commanderLower = commander ? commander.toLowerCase() : null;
            
            for (const [nameLower, occ] of cardOccurrences) {
                if (commanderLower && nameLower === commanderLower) {
                    // Commander might be listed twice (in commander section AND deck)
                    // We should only count it once
                    const hasCommanderSection = occ.entries.some(e => e.isCommander);
                    const hasDeckEntry = occ.entries.some(e => !e.isCommander);
                    
                    if (hasCommanderSection && hasDeckEntry) {
                        // Listed in both places - count only once
                        totalCards += 1;
                    } else {
                        // Only in one place, count normally
                        totalCards += occ.totalQuantity;
                    }
                } else {
                    totalCards += occ.totalQuantity;
                }
            }
            
            // Check for illegal duplicates
            const duplicates = [];
            for (const [nameLower, occ] of cardOccurrences) {
                // Skip basic lands
                if (BASIC_LANDS.has(nameLower)) continue;
                
                // Skip "any number" cards
                if (UNLIMITED_CARDS.has(nameLower)) continue;
                
                // Special case: Seven Dwarves allows up to 7
                if (nameLower === "seven dwarves" && occ.totalQuantity <= 7) continue;
                
                // Skip commander double-listing (that's handled above)
                if (commanderLower && nameLower === commanderLower) {
                    const hasCommanderSection = occ.entries.some(e => e.isCommander);
                    const hasDeckEntry = occ.entries.some(e => !e.isCommander);
                    if (hasCommanderSection && hasDeckEntry && occ.totalQuantity === 2) continue;
                }
                
                // Check if more than 1 copy
                if (occ.totalQuantity > 1) {
                    duplicates.push({ name: occ.properName, count: occ.totalQuantity });
                }
            }
            
            if (duplicates.length > 0) {
                warnings.push({
                    type: 'duplicates',
                    message: 'Duplicate cards found (Commander allows only 1 copy of each non-basic):',
                    items: duplicates.map(d => `${d.name} (√ó${d.count})`)
                });
            }
            
            // Check deck size
            if (totalCards !== 100) {
                warnings.push({
                    type: 'deckSize',
                    message: `Deck has ${totalCards} cards (Commander requires exactly 100)`,
                    items: []
                });
            }
            
            // Analyze for bracket criteria
            let lands = 0;
            let nonLandCount = 0;
            const analyzedCards = new Set();
            
            for (const card of cards) {
                const nameLower = card.name.toLowerCase();
                
                // Skip if already analyzed this card name
                if (analyzedCards.has(nameLower)) continue;
                analyzedCards.add(nameLower);
                
                const occ = cardOccurrences.get(nameLower);
                const qty = occ ? occ.totalQuantity : card.quantity;
                
                // Check Game Changers
                if (GAME_CHANGERS.has(nameLower)) {
                    gameChangersFound.push(card.name);
                }
                
                // Check mass land denial
                if (MASS_LAND_DENIAL.has(nameLower)) {
                    massLdFound.push(card.name);
                }
                
                // Check extra turns
                if (EXTRA_TURN_CARDS.has(nameLower)) {
                    extraTurnsFound.push(card.name);
                }
                
                // Land detection for stats
                if (BASIC_LANDS.has(nameLower) ||
                    nameLower.includes('command tower') || 
                    nameLower.includes('pathway') ||
                    nameLower.includes(' land') ||
                    nameLower.endsWith(' land') ||
                    /\b(tomb|cradle|sanctum|workshop|tabernacle|chasm)\b/.test(nameLower) ||
                    (!nameLower.includes('search') && !nameLower.includes('fetch') && 
                     (nameLower.includes('grove') || nameLower.includes('garden') || 
                      nameLower.includes('pool') || nameLower.includes('falls') ||
                      nameLower.includes('temple') || nameLower.includes('shrine')))) {
                    lands += qty;
                } else {
                    nonLandCount += qty;
                }
            }
            
            // Calculate bracket
            let bracket = 2;
            const reasoning = [];
            
            if (gameChangersFound.length > 3) {
                bracket = Math.max(bracket, 4);
                reasoning.push(`Has ${gameChangersFound.length} Game Changers (>3 requires Bracket 4+)`);
            } else if (gameChangersFound.length > 0) {
                bracket = Math.max(bracket, 3);
                reasoning.push(`Has ${gameChangersFound.length} Game Changer(s) (requires Bracket 3+)`);
            }
            
            if (massLdFound.length > 0) {
                bracket = Math.max(bracket, 4);
                reasoning.push(`Contains mass land denial (requires Bracket 4+)`);
            }
            
            if (extraTurnsFound.length >= 3) {
                bracket = Math.max(bracket, 4);
                reasoning.push(`Has ${extraTurnsFound.length} extra turn cards (high density)`);
            } else if (extraTurnsFound.length >= 1) {
                bracket = Math.max(bracket, 3);
                reasoning.push(`Has ${extraTurnsFound.length} extra turn card(s)`);
            }
            
            if (reasoning.length === 0) {
                reasoning.push("No Game Changers or problematic cards found");
                reasoning.push("Deck appears to be at precon power level");
            }
            
            return {
                totalCards,
                uniqueCards: cardOccurrences.size,
                commander,
                gameChangersFound,
                gameChangersCount: gameChangersFound.length,
                massLdFound,
                extraTurnsFound,
                suggestedBracket: bracket,
                reasoning,
                lands,
                nonLandCount,
                warnings
            };
        }
        
        // ============================================================
        // REACT COMPONENTS
        // ============================================================
        
        function BracketBadge({ bracket }) {
            return (
                <div className={`bracket-badge bracket-${bracket}`}>
                    {bracket}
                    <span className="bracket-name">{BRACKET_NAMES[bracket]}</span>
                </div>
            );
        }
        
        function WarningCard({ warning }) {
            return (
                <div className="warning-card">
                    <h3>‚ö†Ô∏è {warning.message}</h3>
                    {warning.items && warning.items.length > 0 && (
                        <ul className="warning-list">
                            {warning.items.map((item, i) => (
                                <li key={i}>‚Ä¢ {item}</li>
                            ))}
                        </ul>
                    )}
                </div>
            );
        }
        
        function App() {
            const [decklist, setDecklist] = React.useState('');
            const [analysis, setAnalysis] = React.useState(null);
            const [loading, setLoading] = React.useState(false);
            
            // Sample deck with commander section - exactly 100 cards
            const sampleDeck = `// Commander
1 Teysa Karlov

// Creatures
1 Zulaport Cutthroat
1 Blood Artist
1 Cruel Celebrant
1 Viscera Seer
1 Carrion Feeder
1 Doomed Traveler
1 Hunted Witness
1 Ministrant of Obligation
1 Midnight Reaper
1 Grim Haruspex
1 Pitiless Plunderer
1 Elenda, the Dusk Rose
1 Butcher of Malakir
1 Grave Titan
1 Sun Titan
1 Massacre Wurm
1 Reveillark
1 Karmic Guide
1 Leonin Relic-Warder

// Enchantments
1 Dictate of Erebos
1 Grave Pact
1 Black Market
1 Anointed Procession
1 Bastion of Remembrance
1 Phyrexian Arena

// Artifacts
1 Sol Ring
1 Arcane Signet
1 Orzhov Signet
1 Talisman of Hierarchy
1 Skullclamp
1 Altar of Dementia
1 Ashnod's Altar

// Instants
1 Swords to Plowshares
1 Path to Exile
1 Anguished Unmaking
1 Utter End
1 Village Rites
1 Deadly Dispute

// Sorceries
1 Wrath of God
1 Damn
1 Austere Command
1 Victimize
1 Unburial Rites

// Lands
1 Command Tower
1 Godless Shrine
1 Isolated Chapel
1 Caves of Koilos
1 Shambling Vent
1 Temple of Silence
1 Orzhov Basilica
1 Vault of Champions
1 Brightclimb Pathway
1 Shattered Sanctum
1 High Market
1 Phyrexian Tower
1 Evolving Wilds
1 Terramorphic Expanse
18 Plains
18 Swamp`;

            // High-power sample with Game Changers
            const samplePoweredDeck = `// Commander
1 Yuriko, the Tiger's Shadow

// Ninjas & Evasion
1 Changeling Outcast
1 Slither Blade
1 Ornithopter
1 Faerie Seer
1 Ninja of the Deep Hours
1 Fallen Shinobi
1 Sakashima's Student
1 Ingenious Infiltrator
1 Silent-Blade Oni
1 Throat Slitter

// Card Advantage (Game Changers!)
1 Rhystic Study
1 Necropotence
1 Bolas's Citadel
1 Consecrated Sphinx

// Tutors (Game Changers!)
1 Demonic Tutor
1 Vampiric Tutor
1 Mystical Tutor
1 Imperial Seal

// Interaction (Game Changers!)
1 Cyclonic Rift
1 Force of Will
1 Fierce Guardianship

// Fast Mana (Game Changers!)
1 Chrome Mox
1 Mana Vault
1 Ancient Tomb

// Other Interaction
1 Counterspell
1 Swan Song
1 Deadly Rollick
1 Drown in the Loch

// Top Deck Manipulation
1 Brainstorm
1 Ponder
1 Preordain
1 Sensei's Divining Top
1 Scroll Rack

// High CMC for Yuriko
1 Draco
1 Temporal Trespass
1 Treasure Cruise
1 Dig Through Time

// Ramp
1 Sol Ring
1 Arcane Signet
1 Dimir Signet
1 Talisman of Dominance

// Lands
1 Command Tower
1 Watery Grave
1 Polluted Delta
1 Morphic Pool
1 Drowned Catacomb
1 Darkslick Shores
1 Underground River
1 Clearwater Pathway
1 Temple of Deceit
1 Sunken Ruins
1 Otawara, Soaring City
1 Creeping Tar Pit
20 Island
17 Swamp`;
            
            const handleAnalyze = () => {
                setLoading(true);
                
                setTimeout(() => {
                    const { cards, commander } = parseDecklist(decklist);
                    
                    if (cards.length === 0) {
                        setAnalysis({ 
                            error: true, 
                            message: 'No cards found. Check your decklist format.' 
                        });
                    } else {
                        const result = analyzeCards(cards, commander);
                        setAnalysis(result);
                    }
                    
                    setLoading(false);
                }, 100);
            };
            
            return (
                <div className="container">
                    <header>
                        <h1>‚öîÔ∏è MTG Commander Bracket Analyzer</h1>
                        <p className="subtitle">Analyze your deck for the WotC bracket system</p>
                    </header>
                    
                    <div className="info-banner">
                        üí° <strong>Tip:</strong> Use a "// Commander" section header to identify your commander.
                        Format: one card per line, e.g., "1 Sol Ring" or "1x Sol Ring"
                    </div>
                    
                    <div className="input-section">
                        <label>Paste Your Decklist</label>
                        <textarea 
                            value={decklist}
                            onChange={(e) => setDecklist(e.target.value)}
                            placeholder={"// Commander\n1 Teysa Karlov\n\n// Creatures\n1 Sol Ring\n1 Arcane Signet\n..."}
                        />
                        <div className="button-row">
                            <button className="btn-primary" onClick={handleAnalyze}>
                                üîÆ Analyze Deck
                            </button>
                            <button className="btn-secondary" onClick={() => setDecklist(sampleDeck)}>
                                Load Casual (100 cards)
                            </button>
                            <button className="btn-secondary" onClick={() => setDecklist(samplePoweredDeck)}>
                                Load High-Power
                            </button>
                        </div>
                    </div>
                    
                    {loading && (
                        <div className="loading">
                            <div className="spinner"></div>
                            <p>Analyzing your deck...</p>
                        </div>
                    )}
                    
                    {analysis && !loading && analysis.error && (
                        <div className="result-card" style={{borderColor: 'var(--bracket-5)'}}>
                            <h2>‚ùå {analysis.message}</h2>
                        </div>
                    )}
                    
                    {analysis && !loading && !analysis.error && (
                        <div className="results">
                            {/* Warnings Section */}
                            {analysis.warnings && analysis.warnings.length > 0 && (
                                <div className="result-card">
                                    <h2>‚ö†Ô∏è Deck Warnings</h2>
                                    {analysis.warnings.map((w, i) => (
                                        <WarningCard key={i} warning={w} />
                                    ))}
                                </div>
                            )}
                            
                            {/* Commander Display */}
                            {analysis.commander && (
                                <div className="commander-display">
                                    <span className="commander-icon">üëë</span>
                                    <div>
                                        <div className="commander-label">Commander</div>
                                        <div className="commander-name">{analysis.commander}</div>
                                    </div>
                                </div>
                            )}
                            
                            {/* Bracket Result */}
                            <div className="result-card">
                                <h2>üéØ Suggested Bracket</h2>
                                <BracketBadge bracket={analysis.suggestedBracket} />
                                
                                <h3 style={{marginTop: '1.5rem', marginBottom: '0.5rem'}}>Reasoning:</h3>
                                <ul className="reasoning-list">
                                    {analysis.reasoning.map((r, i) => (
                                        <li key={i}>{r}</li>
                                    ))}
                                </ul>
                            </div>
                            
                            {/* Game Changers */}
                            <div className="result-card">
                                <h2>‚ö° Game Changers ({analysis.gameChangersCount})</h2>
                                {analysis.gameChangersFound.length > 0 ? (
                                    <>
                                        <div className="game-changer-list">
                                            {analysis.gameChangersFound.map((gc, i) => (
                                                <span key={i} className="game-changer-tag">{gc}</span>
                                            ))}
                                        </div>
                                        {analysis.gameChangersCount <= 3 ? (
                                            <p style={{marginTop: '1rem', color: 'var(--text-muted)'}}>
                                                ‚Üí Within the 3-card limit for Bracket 3
                                            </p>
                                        ) : (
                                            <p style={{marginTop: '1rem', color: 'var(--bracket-4)'}}>
                                                ‚Üí Exceeds 3-card limit, requires Bracket 4+
                                            </p>
                                        )}
                                    </>
                                ) : (
                                    <p style={{color: 'var(--bracket-1)'}}>
                                        ‚úì None found - eligible for Bracket 1 or 2
                                    </p>
                                )}
                            </div>
                            
                            {/* Bracket-Affecting Cards */}
                            {(analysis.massLdFound.length > 0 || analysis.extraTurnsFound.length > 0) && (
                                <div className="result-card">
                                    <h2>üö® Bracket-Affecting Cards</h2>
                                    {analysis.massLdFound.length > 0 && (
                                        <>
                                            <h4 style={{marginBottom: '0.5rem'}}>Mass Land Denial:</h4>
                                            <div className="game-changer-list" style={{marginBottom: '1rem'}}>
                                                {analysis.massLdFound.map((c, i) => (
                                                    <span key={i} className="game-changer-tag" 
                                                          style={{borderColor: 'var(--bracket-5)'}}>{c}</span>
                                                ))}
                                            </div>
                                        </>
                                    )}
                                    {analysis.extraTurnsFound.length > 0 && (
                                        <>
                                            <h4 style={{marginBottom: '0.5rem'}}>Extra Turn Cards:</h4>
                                            <div className="game-changer-list">
                                                {analysis.extraTurnsFound.map((c, i) => (
                                                    <span key={i} className="game-changer-tag" 
                                                          style={{borderColor: 'var(--accent-blue)'}}>{c}</span>
                                                ))}
                                            </div>
                                        </>
                                    )}
                                </div>
                            )}
                            
                            {/* Deck Statistics */}
                            <div className="result-card">
                                <h2>üìä Deck Statistics</h2>
                                <div className="stats-grid">
                                    <div className="stat">
                                        <div className="stat-value" style={{
                                            color: analysis.totalCards === 100 ? 'var(--bracket-1)' : 'var(--warning-yellow)'
                                        }}>
                                            {analysis.totalCards}
                                        </div>
                                        <div className="stat-label">Total Cards</div>
                                    </div>
                                    <div className="stat">
                                        <div className="stat-value">{analysis.uniqueCards}</div>
                                        <div className="stat-label">Unique Cards</div>
                                    </div>
                                    <div className="stat">
                                        <div className="stat-value">{analysis.gameChangersCount}</div>
                                        <div className="stat-label">Game Changers</div>
                                    </div>
                                    <div className="stat">
                                        <div className="stat-value">{analysis.lands}</div>
                                        <div className="stat-label">Lands (est.)</div>
                                    </div>
                                    <div className="stat">
                                        <div className="stat-value">{analysis.nonLandCount}</div>
                                        <div className="stat-label">Non-Lands</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                    
                    <footer style={{textAlign: 'center', marginTop: '3rem', color: 'var(--text-muted)', fontSize: '0.9rem'}}>
                        <p>Brackets are guidelines for pregame discussion, not hard rules. Talk to your playgroup! üé≤</p>
                        <p style={{marginTop: '0.5rem'}}>Game Changers list as of October 2025</p>
                    </footer>
                </div>
            );
        }
        
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
